(()=>{"use strict";var e={row1:["§","1","2","3","4","5","6","7","8","9","0","-","=","backspace"],row2:["Tab","q","w","e","r","t","y","u","i","o","p","[","]"],row3:["CapsLock","a","s","d","f","g","h","j","k","l",";","'","\\","enter"],row4:["Shift","z","x","c","v","b","n","m",",",".","/","Shift"],row5:["control","AltLeft","cmdLeft","Space","cmdRight","AltRight","←","↑","↓","→"]},t=new DocumentFragment,c=document.createElement("div");c.classList.add("keyboard");var o,a=!1,d=document.createElement("textarea");d.classList.add("textarea"),d.value="",d.focus();var n=function(){var t=document.createElement("div"),n=document.createElement("div");n.classList.add("keyboard_arrows"),t.classList.add("keyboard__row"),e[s].forEach((function(e){var c,s=document.createElement("button");s.addEventListener("mousedown",(function(){i(s)})),"string"==typeof(c=e)&&/^[a-zA-Za-яА-Я]+$/.test(c)&&1===c.length&&s.classList.add("key_letter"),"Shift"===e?(s.classList.add("key_shift"),s.addEventListener("click",(function(){setTimeout((function(){a=!a,l()}),500)}))):"backspace"===e&&s.addEventListener("click",(function(){d.value=d.value?d.value.slice(0,-1):""})),function(e,t){switch(e){case"CapsLock":o=t,t.classList.add("key_wide"),t.addEventListener("click",(function(){l()}));case"tab":case"Shift":case"enter":case"backspace":t.classList.add("key_wide");break;case"Space":t.classList.add("key_space")}}(e,s),s.textContent=e,s.setAttribute("type","button"),s.classList.add("keyboard__key"),"Space"===e&&(s.textContent=" "),(1===e.length||"Space"===e||"Tab"===e)&&s.addEventListener("click",(function(){"Tab"!==s.textContent?r(s.textContent):r("    ")})),"AltLeft"===e?(s.textContent="option",s.classList.add("key_alt-left")):"AltRight"===e?(s.textContent="option",s.classList.add("key_alt-right")):"cmdLeft"===e?(s.textContent="cmd",s.classList.add("key_cmd-left")):"cmdRight"===e?(s.textContent="cmd",s.classList.add("key_cmd-right")):"←"===e?s.classList.add("key_arrow-left"):"↑"===e?s.classList.add("key_arrow-up"):"↓"===e?s.classList.add("key_arrow-down"):"→"===e&&s.classList.add("key_arrow-right"),"↑"===e||"↓"===e?n.appendChild(s):t.appendChild(s)})),t.appendChild(n),c.appendChild(t)};for(var s in e)n();function r(e){d.value=d.value+e}function i(e){if("CapsLock"===e.textContent)return a=!a,e.classList.toggle("key_clicked"),void l();"Shift"===e.textContent&&(a=!a,l(),e.classList.add("key_clicked")),e.classList.add("key_clicked"),setTimeout((function(){e.classList.remove("key_clicked")}),1e3)}function l(){Array.from(document.querySelectorAll(".key_letter")).forEach((function(e){e.textContent=a?e.textContent.toUpperCase():e.textContent.toLowerCase()}))}t.appendChild(d),t.appendChild(c),document.querySelector("body").appendChild(t);var u=Array.from(document.querySelectorAll(".key_shift")),k=document.querySelector(".key_alt-left"),y=document.querySelector(".key_alt-right"),f=document.querySelector(".key_cmd-left"),L=document.querySelector(".key_cmd-right"),m=document.querySelector(".key_arrow-up"),h=document.querySelector(".key_arrow-down"),p=document.querySelector(".key_arrow-left"),_=document.querySelector(".key_arrow-right");document.addEventListener("keydown",(function(e){return d.focus(),console.log(e.code),"ShiftLeft"===e.code?(i(u[0]),void u[0].classList.add("key_clicked")):"ShiftRight"===e.code?(i(u[1]),void u[1].classList.add("key_clicked")):("AltLeft"===e.code?i(k):"AltRight"===e.code?i(y):"MetaLeft"===e.code?i(f):"MetaRight"===e.code?i(L):"ArrowUp"===e.code?i(m):"ArrowDown"===e.code?i(h):"ArrowLeft"===e.code?i(p):"ArrowRight"===e.code&&i(_),void Array.from(document.querySelectorAll(".keyboard__key")).map((function(t){t.textContent.toLowerCase()===e.key.toLowerCase()&&i(t)})))})),document.addEventListener("keyup",(function(e){console.log(e),"CapsLock"!==e.key&&"Shift"!==e.key||(a=!a,l(),"CapsLock"===e.key?o.classList.toggle("key_clicked"):"ShiftLeft"===e.code?u[0].classList.remove("key_clicked"):"ShiftRight"===e.code&&u[1].classList.remove("key_clicked"))}))})();